"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.send = void 0;
const js_yaml_1 = require("js-yaml");
const kube_port_forward_1 = require("./kube/kube-port-forward");
const event_1 = require("./event");
async function send(event, keptnAuth = '', kubeSettings = `{"enabled": false}`) {
    const kubeConnectObject = (0, js_yaml_1.load)(kubeSettings);
    const kubeConnect = kubeConnectObject;
    console.log(`GLOBAL: Event: ${event}`);
    if (kubeConnect.enabled) {
        console.log('GLOBAL: Update services with Kubernetes connection.');
        console.log(`KUBE: KubeAPISettings: ${JSON.stringify(kubeConnectObject)}`);
        return await (0, kube_port_forward_1.kubeUpdateService)(kubeConnect, event);
    }
    else {
        console.log('GLOBAL: Update services with API URL and token.');
        return (0, event_1.sendEvent)((0, js_yaml_1.load)(keptnAuth), event);
    }
}
exports.send = send;
